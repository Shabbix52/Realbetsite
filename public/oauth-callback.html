<!DOCTYPE html>
<html>
<head><title>Authenticating...</title></head>
<body style="background:#0D0D0D;color:#fff;font-family:sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;margin:0">
  <div style="text-align:center">
    <p id="msg">Connecting...</p>
    <p style="opacity:0.5;font-size:14px">This window will close automatically...</p>
  </div>
  <script>
    try {
      var params = new URLSearchParams(window.location.search);
      var raw = params.get('data');
      if (raw) {
        var data = JSON.parse(decodeURIComponent(raw));
        document.getElementById('msg').textContent = data.success ? '\u2705 Connected!' : '\u274C Connection failed';
        if (window.opener) {
          window.opener.postMessage(data, window.location.origin);
        }
      } else {
        document.getElementById('msg').textContent = '\u274C No data received';
      }
    } catch(e) {
      document.getElementById('msg').textContent = '\u274C Error processing callback';
    }
    setTimeout(function() { window.close(); }, 1500);
  </script>
</body>
</html>
